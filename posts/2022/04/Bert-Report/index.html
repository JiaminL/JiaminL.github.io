<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="BERT 实验记录" /><meta name="author" content="Jiamin Lu" /><meta property="og:locale" content="en" /><meta name="description" content="实验环境" /><meta property="og:description" content="实验环境" /><link rel="canonical" href="https://lujiamin.com/posts/2022/04/Bert-Report/" /><meta property="og:url" content="https://lujiamin.com/posts/2022/04/Bert-Report/" /><meta property="og:site_name" content="Jiamin Lu" /><meta property="og:image" content="https://lujiamin.com/lab/bert/google-bert.jpg" /><meta property="og:image:height" content="500" /><meta property="og:image:width" content="800" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-04-27T00:00:00+08:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://lujiamin.com/lab/bert/google-bert.jpg" /><meta property="twitter:title" content="BERT 实验记录" /><meta name="twitter:site" content="@twitter_username" /><meta name="twitter:creator" content="@Jiamin Lu" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Jiamin Lu","url":"https://github.com/JiaminL/"},"dateModified":"2022-05-24T20:16:21+08:00","datePublished":"2022-04-27T00:00:00+08:00","description":"实验环境","headline":"BERT 实验记录","image":{"width":800,"height":500,"url":"https://lujiamin.com/lab/bert/google-bert.jpg","@type":"imageObject"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://lujiamin.com/posts/2022/04/Bert-Report/"},"url":"https://lujiamin.com/posts/2022/04/Bert-Report/"}</script><title>BERT 实验记录 | Jiamin Lu</title><link rel="apple-touch-icon" sizes="180x180" href="https://lujiamin.com/image/favicon/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://lujiamin.com/image/favicon/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://lujiamin.com/image/favicon/favicon-16x16.png"><link rel="manifest" href="https://lujiamin.com/image/favicon/site.webmanifest"><link rel="shortcut icon" href="https://lujiamin.com/image/favicon/favicon.ico"><meta name="apple-mobile-web-app-title" content="Jiamin Lu"><meta name="application-name" content="Jiamin Lu"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="https://lujiamin.com/image/favicon/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src=" https://lujiamin.com/image/favicon/apple-touch-icon.png " alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Jiamin Lu</a></div><div class="site-subtitle font-italic">A Student of USTC</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/jiaminL" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['lujiamin','mail.ustc.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>BERT 实验记录</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Blog</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel">Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div class="mt-3 mb-3"> <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 800 500'%3E%3C/svg%3E" data-src="https://lujiamin.com/image/lab/bert/google-bert.jpg" class="preview-img bg" alt=" Preview Image" width="800" height="500" style="webkit-filter: drop-shadow(0px 0px 10px rgba(0,0,0,.1));filter: drop-shadow(0px 0px 10px rgba(0,0,0,.1))" data-proofer-ignore></div><h1 data-toc-skip>BERT 实验记录</h1><div class="post-meta text-muted"> <span> Posted <em class="timeago" data-ts="1650988800" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2022-04-27 ------ </em> </span> <span> Updated <em class="timeago" data-ts="1653394581" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2022-05-24 ------ </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://github.com/JiaminL/" target="_blank">Jiamin Lu</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1360 words"> <em>7 min</em> read</span></div></div></div><div class="post-content"><h2 id="实验环境"><span class="mr-2">实验环境</span><a href="#实验环境" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><ul><li>GPU：GeForce RTX 2080 Ti $\times 1$<li>Docker image：tensorflow/tensorflow:1.11.0-gpu<ul><li>CUDA version：9.0<li>Linux 发行版本：Ubuntu 16.04.5 LTS<li>Python version：2.7.12</ul></ul><h2 id="实验代码"><span class="mr-2">实验代码</span><a href="#实验代码" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>实验所用代码仓库：<a href="https://github.com/google-research/bert" target="_blank">https://github.com/google-research/bert</a>，其所提供的代码只支持 CoLA、MRPC、MNLI、XNLI 分类任务与 SQuAD、SQuAD 2.0 问答任务。</p><p>本次实验只对 CoLA 任务进行了测试。所用实验代码为：<a href="https://github.com/google-research/bert/blob/master/run_classifier.py" target="_blank">run_classifier.py</a>。</p><h3 id="获取时间性能数据"><span class="mr-2">获取时间性能数据</span><a href="#获取时间性能数据" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>该代码中是用 <code class="language-plaintext highlighter-rouge">tf.contrib.tpu.TPUEstimator</code> 对象的 <code class="language-plaintext highlighter-rouge">train</code> 方法来进行训练，由于我对 <code class="language-plaintext highlighter-rouge">TensorFlow</code> 的使用并不熟悉，除了将整个代码改写，我并不知道还有什么方法能够获取到每个 epoch 开始/结束的时间点。</p><p>但幸运的是，在其输出的一堆 Log 中，我发现了这样的信息：</p><div file="code output" class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="code output"><i class="far fa-file-code"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre>....
INFO:tensorflow:global_step/sec: 55.2661
INFO:tensorflow:examples/sec: 1768.51
INFO:tensorflow:global_step/sec: 94.3678
INFO:tensorflow:examples/sec: 3019.77
INFO:tensorflow:global_step/sec: 90.2155
....
</pre></table></code></div></div><p>程序给出了每秒钟处理的样例数，这意味着，我可以获取训练过程中输出的 <code class="language-plaintext highlighter-rouge">examples/sec</code> 然后取平均，从而估计出平均样例处理速度，然后用训练样例的总数 <code class="language-plaintext highlighter-rouge">num_examples</code> 去除以平均样例处理速度，从而估计出微调训练时每 epoch 所需的时间，即：</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">time_per_epoch</span> <span class="o">=</span> <span class="n">num_examples</span> <span class="o">/</span> <span class="n">average</span><span class="p">(</span><span class="n">examples_per_sec_list</span><span class="p">)</span>
</pre></table></code></div></div><h3 id="获取gpu占用情况"><span class="mr-2">获取GPU占用情况</span><a href="#获取gpu占用情况" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>由于我并不知道如何结合 TensorFlow 在代码 <a href="https://github.com/google-research/bert/blob/master/run_classifier.py" target="_blank">run_classifier.py</a> 中监控 GPU 占用情况，所以我使用了 <code class="language-plaintext highlighter-rouge">watch -n 0.2 "nvidia-smi | grep % &gt;&gt; $NVIDIA_OUT_FILE</code> 命令来每 0.2s 运行一次 <code class="language-plaintext highlighter-rouge">nvidia-smi</code> 命令，并用 <code class="language-plaintext highlighter-rouge">grep %</code> 过滤输出只留下 GPU 占用情况相关的行，并输出到 <code class="language-plaintext highlighter-rouge">$NVIDIA_OUT_FILE</code> 文件。</p><blockquote><p>实际执行过程中，<code class="language-plaintext highlighter-rouge">nvidia-smi | grep % &gt;&gt; $NVIDIA_OUT_FILE</code> 命令并非严格 0.2s 执行一次，可用如下命令验证：</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="nv">$ </span>watch <span class="nt">-n</span> 0.2 <span class="s2">"date +%S.%N &gt;&gt; tmp.txt; sleep 0.1"</span>
<span class="nv">$ </span><span class="nb">cat </span>tmp.txt
55.138318563
55.447502740
55.757528402
56.068227311
</pre></table></code></div></div><p>可以看出命令 <code class="language-plaintext highlighter-rouge">date +%S.%N &gt;&gt; tmp.txt; sleep 0.1</code> 并非每 0.2s 启动一次，而是等该命令执行完以后，停顿 0.2s 后再次启动，因此该命令会大约 0.31s 执行一次</p></blockquote><p>为了矫正时间误差，我改进为用如下命令来监控 GPU 使用情况：</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span>watch <span class="nt">-n</span> 0.2 <span class="s2">"nvidia-smi | grep % &gt;&gt; </span><span class="nv">$NVIDIA_OUT_FILE</span><span class="s2">; date +%s.%N  &gt;&gt; </span><span class="nv">$NVIDIA_OUT_FILE</span><span class="s2">"</span>
</pre></table></code></div></div><p>可以获得如下所示的输出用来分析实时的 GPU 占用情况：</p><div file="$NVIDIA_OUT_FILE" class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="$NVIDIA_OUT_FILE"><i class="far fa-file-code"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre>....
| 69%   72C    P2   206W / 250W |  10538MiB / 11019MiB |     86%      Default |
1650966846.042205165
| 69%   72C    P2   193W / 250W |  10538MiB / 11019MiB |     86%      Default |
1650966846.324194099
| 69%   72C    P2   190W / 250W |  10538MiB / 11019MiB |     86%      Default |
1650966846.610179581
....
</pre></table></code></div></div><p>执行训练任务所用的命令如下所示：</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre>docker run <span class="nt">--rm</span> <span class="se">\</span>
    <span class="nt">--name</span> <span class="s2">"</span><span class="nv">$DOCKER_NAME</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">--gpus</span> <span class="s2">"</span><span class="se">\"</span><span class="s2">device=</span><span class="nv">$GPU_ID</span><span class="se">\"</span><span class="s2">"</span> <span class="se">\</span>
    <span class="c"># ... docer run 的其他参数省略</span>
    tensorflow/tensorflow:1.11.0-gpu <span class="se">\</span>
    bash <span class="nt">-c</span> <span class="s2">" </span><span class="se">\</span><span class="s2">
    python2 run_classifier.py </span><span class="se">\</span><span class="s2">
    	-- ... 参数省略 </span><span class="se">\</span><span class="s2">
    ; sleep 0.5"</span>
</pre></table></code></div></div><p>由于该 <code class="language-plaintext highlighter-rouge">docker run</code> 命令添加了 <code class="language-plaintext highlighter-rouge">--rm</code> 选项，并且在执行训练任务后 <code class="language-plaintext highlighter-rouge">sleep 0.5</code> ，因此，当训练任务结束后 0.5s，该 container 就会被删掉。</p><p>利用这一特性，可以使用 <code class="language-plaintext highlighter-rouge">docker exec</code> 来监控 GPU，训练任务结束 0.5s 后，监控任务会被杀掉从而结束监控。命令如下所示：</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="c"># $TMP_FILE 是用来防止 watch 命令的显示界面占用 shell 窗口</span>
docker <span class="nb">exec</span> <span class="nt">-t</span> <span class="nv">$DOCKER_NAME</span> bash <span class="nt">-c</span> <span class="s2">"watch -n 0.2 </span><span class="se">\"</span><span class="s2">nvidia-smi | grep % &gt;&gt;</span><span class="nv">$NVIDIA_OUT_FILE</span><span class="se">\"</span><span class="s2">"</span> <span class="o">&gt;</span> <span class="nv">$TMP_FILE</span>
</pre></table></code></div></div><p>为了能够在任务开始时及时开始监控 GPU，我的 shell script 中有如下命令。</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre>trainMain &amp;
<span class="k">while</span> :<span class="p">;</span> <span class="k">do
    </span><span class="nb">sleep </span>0.2
    <span class="c"># 失败后下次循环再次尝试，成功后break循环</span>
    <span class="nv">res</span><span class="o">=</span><span class="si">$(</span>./get_nvidia.sh <span class="nt">-d</span> <span class="s2">"</span><span class="nv">$DOCKER_NAME</span><span class="s2">"</span> <span class="nt">-f</span> <span class="s2">"</span><span class="nv">$NVIDIA_FILE</span><span class="s2">"</span> 2&gt;&amp;1 | <span class="nb">grep</span> <span class="s2">"Error"</span><span class="si">)</span>
    <span class="k">if</span> <span class="o">[[</span> <span class="nt">-z</span> <span class="s2">"</span><span class="nv">$res</span><span class="s2">"</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then
    </span><span class="nb">break
    </span><span class="k">fi
done</span>
</pre></table></code></div></div><p>其中 <code class="language-plaintext highlighter-rouge">trainMain</code> 函数主要功能是运行 <code class="language-plaintext highlighter-rouge">docker run</code> 以开启训练任务。<code class="language-plaintext highlighter-rouge">get_nvidia.sh</code> 中即为上述 <code class="language-plaintext highlighter-rouge">docker exec</code> 命令，由于 container 的建立需要时间，若在建立完成前运行 <code class="language-plaintext highlighter-rouge">docker exec</code>，将会报错：<code class="language-plaintext highlighter-rouge">Error: No such container: ...</code>（ <code class="language-plaintext highlighter-rouge">...</code> 处为 <code class="language-plaintext highlighter-rouge">$DOCKER_NAME</code> 的值），因此需要每 0.2s 尝试一次，直到 <code class="language-plaintext highlighter-rouge">docker exec</code> 成功执行。</p><h2 id="测试"><span class="mr-2">测试</span><a href="#测试" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>对于所有测试，如下的超参数固定：</p><ul><li><code class="language-plaintext highlighter-rouge">max_seq_length = 128</code><li><code class="language-plaintext highlighter-rouge">learning_rate = 2e-5</code><li><code class="language-plaintext highlighter-rouge">num_train_epochs = 5</code></ul><p>对于可用的 24 个 BERT 模型，本次实验仅测试了 BERT-Tiny (2/128)、BERT-Mini (4/256)、BERT-Small (4/512)、BERT-Medium (8/512)、BERT-Base (12/768)。</p><p><strong>任务描述</strong>：CoLA 是 GLUE 中的一个单句子分类任务，语料来自语言理论的书籍和期刊，每个句子被标注为是否合乎语法的单词序列。本任务是一个二分类任务，标签共两个，分别是 0 和 1，其中 0 表示不合乎语法，1 表示合乎语法。</p><p><strong>样本个数</strong>：训练集 8,551 个，开发集 1,043 个，测试集 1,063 个。</p><p>在相同的学习率与相同 max sequence length 下微调训练后，可以得出结论，对于不同的 BERT 模型，模型规模越大，其模型的估计准确度越高，但随之，每个 Epoch 所用时间越长，功耗也越大，GPU 利用率也越高。</p><p>对于相同的 BERT 模型，增加 batch size，并不能给预测准确率带来提升，但其每个 epoch 所花费的时间明显减少，虽然 GPU 的功率也随之增加，但从整体来看，每个 epoch 所花费的能耗是降低的。</p><h2 id="附录实验数据"><span class="mr-2">附录：实验数据</span><a href="#附录实验数据" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><div class="table-wrapper"><div class="table-wrapper"><table><thead><tr><th style="text-align: center;padding: 0.15rem 0.1rem; font-size: 90%; white-space: normal; line-height: 1.2">Model<th style="text-align: center;padding: 0.15rem 0.1rem; font-size: 90%; white-space: normal; line-height: 1.2">Batch Size<th style="text-align: center;padding: 0.15rem 0.1rem; font-size: 90%; white-space: normal; line-height: 1.2">Evaluated Accuracy<th style="text-align: center;padding: 0.15rem 0.1rem; font-size: 90%; white-space: normal; line-height: 1.2">Evaluated Loss<th style="text-align: center;padding: 0.15rem 0.1rem; font-size: 90%; white-space: normal; line-height: 1.2">Train Loss<th style="text-align: center;padding: 0.15rem 0.1rem; font-size: 90%; white-space: normal; line-height: 1.2">Time of Per Epoch<th style="text-align: center;padding: 0.15rem 0.1rem; font-size: 90%; white-space: normal; line-height: 1.2">Average Power<p style="font-size: 50%; color:gray; margin: 0">(Rated Power: 250W)</p><th style="text-align: center;padding: 0.15rem 0.1rem; font-size: 90%; white-space: normal; line-height: 1.2">Average Memory<p style="font-size: 50%; color:gray; margin: 0">(All Memory: 11019MiB)</p><th style="text-align: center;padding: 0.15rem 0.1rem; font-size: 90%; white-space: normal; line-height: 1.2">Average Utilization<th style="text-align: center;padding: 0.15rem 0.1rem; font-size: 90%; white-space: normal; line-height: 1.2">Real time GPU performance<tbody><tr style="background-color: rgb(252, 243, 244); text-align: center; font-size: 80%;"><td style="padding: 0.175rem 0.15rem;">Tiny<td style="padding: 0.175rem 0.15rem;">2<td style="padding: 0.175rem 0.15rem;">69.13%<td style="padding: 0.175rem 0.15rem;">0.90<td style="padding: 0.175rem 0.15rem;">0.90<td style="padding: 0.175rem 0.15rem;">53.11s<td style="padding: 0.175rem 0.15rem;">89.68W<td style="padding: 0.175rem 0.15rem;">10486.2MiB<td style="padding: 0.175rem 0.15rem;">33.16%<td style="padding: 0.175rem 0.15rem;"><img alt="bert_report_CoLA_Tiny_2.png" class="preview-img bg normal" data-loaded="false" height="30px" data-src="https://lujiamin.com/image/lab/bert/bert_report_CoLA_Tiny_2.png" style="margin: 0; height: 30px" data-proofer-ignore><tr style="background-color: rgb(252, 243, 244); text-align: center; font-size: 80%;"><td style="padding: 0.175rem 0.15rem;">Tiny<td style="padding: 0.175rem 0.15rem;">4<td style="padding: 0.175rem 0.15rem;">69.13%<td style="padding: 0.175rem 0.15rem;">0.62<td style="padding: 0.175rem 0.15rem;">0.62<td style="padding: 0.175rem 0.15rem;">23.33s<td style="padding: 0.175rem 0.15rem;">103.02W<td style="padding: 0.175rem 0.15rem;">10431.9MiB<td style="padding: 0.175rem 0.15rem;">35.31%<td style="padding: 0.175rem 0.15rem;"><img alt="bert_report_CoLA_Tiny_4.png" class="preview-img bg normal" data-loaded="false" height="30px" data-src="https://lujiamin.com/image/lab/bert/bert_report_CoLA_Tiny_4.png" style="margin: 0; height: 30px" data-proofer-ignore><tr style="background-color: rgb(252, 243, 244); text-align: center; font-size: 80%;"><td style="padding: 0.175rem 0.15rem;">Tiny<td style="padding: 0.175rem 0.15rem;">8<td style="padding: 0.175rem 0.15rem;">69.13%<td style="padding: 0.175rem 0.15rem;">0.62<td style="padding: 0.175rem 0.15rem;">0.62<td style="padding: 0.175rem 0.15rem;">15.17s<td style="padding: 0.175rem 0.15rem;">95.64W<td style="padding: 0.175rem 0.15rem;">10413.6MiB<td style="padding: 0.175rem 0.15rem;">29.60%<td style="padding: 0.175rem 0.15rem;"><img alt="bert_report_CoLA_Tiny_8.png" class="preview-img bg normal" data-loaded="false" height="30px" data-src="https://lujiamin.com/image/lab/bert/bert_report_CoLA_Tiny_8.png" style="margin: 0; height: 30px" data-proofer-ignore><tr style="background-color: rgb(252, 243, 244); text-align: center; font-size: 80%;"><td style="padding: 0.175rem 0.15rem;">Tiny<td style="padding: 0.175rem 0.15rem;">16<td style="padding: 0.175rem 0.15rem;">69.13%<td style="padding: 0.175rem 0.15rem;">0.61<td style="padding: 0.175rem 0.15rem;">0.61<td style="padding: 0.175rem 0.15rem;">5.73s<td style="padding: 0.175rem 0.15rem;">115.74W<td style="padding: 0.175rem 0.15rem;">10291.1MiB<td style="padding: 0.175rem 0.15rem;">35.01%<td style="padding: 0.175rem 0.15rem;"><img alt="bert_report_CoLA_Tiny_16.png" class="preview-img bg normal" data-loaded="false" height="30px" data-src="https://lujiamin.com/image/lab/bert/bert_report_CoLA_Tiny_16.png" style="margin: 0; height: 30px" data-proofer-ignore><tr style="background-color: rgb(252, 243, 244); text-align: center; font-size: 80%;"><td style="padding: 0.175rem 0.15rem;">Tiny<td style="padding: 0.175rem 0.15rem;">32<td style="padding: 0.175rem 0.15rem;">69.13%<td style="padding: 0.175rem 0.15rem;">0.62<td style="padding: 0.175rem 0.15rem;">0.62<td style="padding: 0.175rem 0.15rem;">3.21s<td style="padding: 0.175rem 0.15rem;">117.05W<td style="padding: 0.175rem 0.15rem;">10118.2MiB<td style="padding: 0.175rem 0.15rem;">36.09%<td style="padding: 0.175rem 0.15rem;"><img alt="bert_report_CoLA_Tiny_32.png" class="preview-img bg normal" data-loaded="false" height="30px" data-src="https://lujiamin.com/image/lab/bert/bert_report_CoLA_Tiny_32.png" style="margin: 0; height: 30px" data-proofer-ignore><tr style="background-color: rgb(252, 243, 244); text-align: center; font-size: 80%;"><td style="padding: 0.175rem 0.15rem;">Tiny<td style="padding: 0.175rem 0.15rem;">64<td style="padding: 0.175rem 0.15rem;">69.13%<td style="padding: 0.175rem 0.15rem;">0.62<td style="padding: 0.175rem 0.15rem;">0.62<td style="padding: 0.175rem 0.15rem;">2.53s<td style="padding: 0.175rem 0.15rem;">126.77W<td style="padding: 0.175rem 0.15rem;">10048.6MiB<td style="padding: 0.175rem 0.15rem;">38.79%<td style="padding: 0.175rem 0.15rem;"><img alt="bert_report_CoLA_Tiny_64.png" class="preview-img bg normal" data-loaded="false" height="30px" data-src="https://lujiamin.com/image/lab/bert/bert_report_CoLA_Tiny_64.png" style="margin: 0; height: 30px" data-proofer-ignore><tr style="background-color: rgb(255, 255, 235); text-align: center; font-size: 80%;"><td style="padding: 0.175rem 0.15rem;">Mini<td style="padding: 0.175rem 0.15rem;">2<td style="padding: 0.175rem 0.15rem;">70.57%<td style="padding: 0.175rem 0.15rem;">1.14<td style="padding: 0.175rem 0.15rem;">1.14<td style="padding: 0.175rem 0.15rem;">102.27s<td style="padding: 0.175rem 0.15rem;">111.77W<td style="padding: 0.175rem 0.15rem;">10509.9MiB<td style="padding: 0.175rem 0.15rem;">36.02%<td style="padding: 0.175rem 0.15rem;"><img alt="bert_report_CoLA_Mini_2.png" class="preview-img bg normal" data-loaded="false" height="30px" data-src="https://lujiamin.com/image/lab/bert/bert_report_CoLA_Mini_2.png" style="margin: 0; height: 30px" data-proofer-ignore><tr style="background-color: rgb(255, 255, 235); text-align: center; font-size: 80%;"><td style="padding: 0.175rem 0.15rem;">Mini<td style="padding: 0.175rem 0.15rem;">4<td style="padding: 0.175rem 0.15rem;">70.37%<td style="padding: 0.175rem 0.15rem;">0.84<td style="padding: 0.175rem 0.15rem;">0.84<td style="padding: 0.175rem 0.15rem;">51.18s<td style="padding: 0.175rem 0.15rem;">118.30W<td style="padding: 0.175rem 0.15rem;">10494.2MiB<td style="padding: 0.175rem 0.15rem;">38.39%<td style="padding: 0.175rem 0.15rem;"><img alt="bert_report_CoLA_Mini_4.png" class="preview-img bg normal" data-loaded="false" height="30px" data-src="https://lujiamin.com/image/lab/bert/bert_report_CoLA_Mini_4.png" style="margin: 0; height: 30px" data-proofer-ignore><tr style="background-color: rgb(255, 255, 235); text-align: center; font-size: 80%;"><td style="padding: 0.175rem 0.15rem;">Mini<td style="padding: 0.175rem 0.15rem;">8<td style="padding: 0.175rem 0.15rem;">70.18%<td style="padding: 0.175rem 0.15rem;">0.63<td style="padding: 0.175rem 0.15rem;">0.63<td style="padding: 0.175rem 0.15rem;">26.27s<td style="padding: 0.175rem 0.15rem;">138.96W<td style="padding: 0.175rem 0.15rem;">10459.0MiB<td style="padding: 0.175rem 0.15rem;">42.70%<td style="padding: 0.175rem 0.15rem;"><img alt="bert_report_CoLA_Mini_8.png" class="preview-img bg normal" data-loaded="false" height="30px" data-src="https://lujiamin.com/image/lab/bert/bert_report_CoLA_Mini_8.png" style="margin: 0; height: 30px" data-proofer-ignore><tr style="background-color: rgb(255, 255, 235); text-align: center; font-size: 80%;"><td style="padding: 0.175rem 0.15rem;">Mini<td style="padding: 0.175rem 0.15rem;">16<td style="padding: 0.175rem 0.15rem;">69.22%<td style="padding: 0.175rem 0.15rem;">0.62<td style="padding: 0.175rem 0.15rem;">0.62<td style="padding: 0.175rem 0.15rem;">14.14s<td style="padding: 0.175rem 0.15rem;">158.72W<td style="padding: 0.175rem 0.15rem;">10389.6MiB<td style="padding: 0.175rem 0.15rem;">50.77%<td style="padding: 0.175rem 0.15rem;"><img alt="bert_report_CoLA_Mini_16.png" class="preview-img bg normal" data-loaded="false" height="30px" data-src="https://lujiamin.com/image/lab/bert/bert_report_CoLA_Mini_16.png" style="margin: 0; height: 30px" data-proofer-ignore><tr style="background-color: rgb(255, 255, 235); text-align: center; font-size: 80%;"><td style="padding: 0.175rem 0.15rem;">Mini<td style="padding: 0.175rem 0.15rem;">32<td style="padding: 0.175rem 0.15rem;">70.76%<td style="padding: 0.175rem 0.15rem;">0.61<td style="padding: 0.175rem 0.15rem;">0.61<td style="padding: 0.175rem 0.15rem;">10.54s<td style="padding: 0.175rem 0.15rem;">165.95W<td style="padding: 0.175rem 0.15rem;">10383.2MiB<td style="padding: 0.175rem 0.15rem;">54.42%<td style="padding: 0.175rem 0.15rem;"><img alt="bert_report_CoLA_Mini_32.png" class="preview-img bg normal" data-loaded="false" height="30px" data-src="https://lujiamin.com/image/lab/bert/bert_report_CoLA_Mini_32.png" style="margin: 0; height: 30px" data-proofer-ignore><tr style="background-color: rgb(255, 255, 235); text-align: center; font-size: 80%;"><td style="padding: 0.175rem 0.15rem;">Mini<td style="padding: 0.175rem 0.15rem;">64<td style="padding: 0.175rem 0.15rem;">69.51%<td style="padding: 0.175rem 0.15rem;">0.62<td style="padding: 0.175rem 0.15rem;">0.62<td style="padding: 0.175rem 0.15rem;">8.92s<td style="padding: 0.175rem 0.15rem;">174.75W<td style="padding: 0.175rem 0.15rem;">10361.4MiB<td style="padding: 0.175rem 0.15rem;">58.74%<td style="padding: 0.175rem 0.15rem;"><img alt="bert_report_CoLA_Mini_64.png" class="preview-img bg normal" data-loaded="false" height="30px" data-src="https://lujiamin.com/image/lab/bert/bert_report_CoLA_Mini_64.png" style="margin: 0; height: 30px" data-proofer-ignore><tr style="background-color: rgb(247, 255, 247); text-align: center; font-size: 80%;"><td style="padding: 0.175rem 0.15rem;">Small<td style="padding: 0.175rem 0.15rem;">2<td style="padding: 0.175rem 0.15rem;">74.02%<td style="padding: 0.175rem 0.15rem;">1.51<td style="padding: 0.175rem 0.15rem;">1.52<td style="padding: 0.175rem 0.15rem;">112.29s<td style="padding: 0.175rem 0.15rem;">147.67W<td style="padding: 0.175rem 0.15rem;">10515.0MiB<td style="padding: 0.175rem 0.15rem;">59.22%<td style="padding: 0.175rem 0.15rem;"><img alt="bert_report_CoLA_Small_2.png" class="preview-img bg normal" data-loaded="false" height="30px" data-src="https://lujiamin.com/image/lab/bert/bert_report_CoLA_Small_2.png" style="margin: 0; height: 30px" data-proofer-ignore><tr style="background-color: rgb(247, 255, 247); text-align: center; font-size: 80%;"><td style="padding: 0.175rem 0.15rem;">Small<td style="padding: 0.175rem 0.15rem;">4<td style="padding: 0.175rem 0.15rem;">74.40%<td style="padding: 0.175rem 0.15rem;">1.34<td style="padding: 0.175rem 0.15rem;">1.34<td style="padding: 0.175rem 0.15rem;">56.64s<td style="padding: 0.175rem 0.15rem;">182.98W<td style="padding: 0.175rem 0.15rem;">10480.8MiB<td style="padding: 0.175rem 0.15rem;">66.60%<td style="padding: 0.175rem 0.15rem;"><img alt="bert_report_CoLA_Small_4.png" class="preview-img bg normal" data-loaded="false" height="30px" data-src="https://lujiamin.com/image/lab/bert/bert_report_CoLA_Small_4.png" style="margin: 0; height: 30px" data-proofer-ignore><tr style="background-color: rgb(247, 255, 247); text-align: center; font-size: 80%;"><td style="padding: 0.175rem 0.15rem;">Small<td style="padding: 0.175rem 0.15rem;">8<td style="padding: 0.175rem 0.15rem;">73.44%<td style="padding: 0.175rem 0.15rem;">0.99<td style="padding: 0.175rem 0.15rem;">1.00<td style="padding: 0.175rem 0.15rem;">34.76s<td style="padding: 0.175rem 0.15rem;">203.46W<td style="padding: 0.175rem 0.15rem;">10475.2MiB<td style="padding: 0.175rem 0.15rem;">73.51%<td style="padding: 0.175rem 0.15rem;"><img alt="bert_report_CoLA_Small_8.png" class="preview-img bg normal" data-loaded="false" height="30px" data-src="https://lujiamin.com/image/lab/bert/bert_report_CoLA_Small_8.png" style="margin: 0; height: 30px" data-proofer-ignore><tr style="background-color: rgb(247, 255, 247); text-align: center; font-size: 80%;"><td style="padding: 0.175rem 0.15rem;">Small<td style="padding: 0.175rem 0.15rem;">16<td style="padding: 0.175rem 0.15rem;">74.21%<td style="padding: 0.175rem 0.15rem;">0.73<td style="padding: 0.175rem 0.15rem;">0.74<td style="padding: 0.175rem 0.15rem;">25.74s<td style="padding: 0.175rem 0.15rem;">204.59W<td style="padding: 0.175rem 0.15rem;">10462.6MiB<td style="padding: 0.175rem 0.15rem;">74.33%<td style="padding: 0.175rem 0.15rem;"><img alt="bert_report_CoLA_Small_16.png" class="preview-img bg normal" data-loaded="false" height="30px" data-src="https://lujiamin.com/image/lab/bert/bert_report_CoLA_Small_16.png" style="margin: 0; height: 30px" data-proofer-ignore><tr style="background-color: rgb(247, 255, 247); text-align: center; font-size: 80%;"><td style="padding: 0.175rem 0.15rem;">Small<td style="padding: 0.175rem 0.15rem;">32<td style="padding: 0.175rem 0.15rem;">73.54%<td style="padding: 0.175rem 0.15rem;">0.72<td style="padding: 0.175rem 0.15rem;">0.73<td style="padding: 0.175rem 0.15rem;">20.50s<td style="padding: 0.175rem 0.15rem;">203.58W<td style="padding: 0.175rem 0.15rem;">10426.4MiB<td style="padding: 0.175rem 0.15rem;">75.43%<td style="padding: 0.175rem 0.15rem;"><img alt="bert_report_CoLA_Small_32.png" class="preview-img bg normal" data-loaded="false" height="30px" data-src="https://lujiamin.com/image/lab/bert/bert_report_CoLA_Small_32.png" style="margin: 0; height: 30px" data-proofer-ignore><tr style="background-color: rgb(247, 255, 247); text-align: center; font-size: 80%;"><td style="padding: 0.175rem 0.15rem;">Small<td style="padding: 0.175rem 0.15rem;">64<td style="padding: 0.175rem 0.15rem;">73.73%<td style="padding: 0.175rem 0.15rem;">0.70<td style="padding: 0.175rem 0.15rem;">0.70<td style="padding: 0.175rem 0.15rem;">18.03s<td style="padding: 0.175rem 0.15rem;">204.82W<td style="padding: 0.175rem 0.15rem;">10436.3MiB<td style="padding: 0.175rem 0.15rem;">77.36%<td style="padding: 0.175rem 0.15rem;"><img alt="bert_report_CoLA_Small_64.png" class="preview-img bg normal" data-loaded="false" height="30px" data-src="https://lujiamin.com/image/lab/bert/bert_report_CoLA_Small_64.png" style="margin: 0; height: 30px" data-proofer-ignore><tr style="background-color: rgb(245, 251, 255); text-align: center; font-size: 80%;"><td style="padding: 0.175rem 0.15rem;">Medium<td style="padding: 0.175rem 0.15rem;">2<td style="padding: 0.175rem 0.15rem;">78.72%<td style="padding: 0.175rem 0.15rem;">1.52<td style="padding: 0.175rem 0.15rem;">1.52<td style="padding: 0.175rem 0.15rem;">176.69s<td style="padding: 0.175rem 0.15rem;">153.54W<td style="padding: 0.175rem 0.15rem;">10523.1MiB<td style="padding: 0.175rem 0.15rem;">61.83%<td style="padding: 0.175rem 0.15rem;"><img alt="bert_report_CoLA_Medium_2.png" class="preview-img bg normal" data-loaded="false" height="30px" data-src="https://lujiamin.com/image/lab/bert/bert_report_CoLA_Medium_2.png" style="margin: 0; height: 30px" data-proofer-ignore><tr style="background-color: rgb(245, 251, 255); text-align: center; font-size: 80%;"><td style="padding: 0.175rem 0.15rem;">Medium<td style="padding: 0.175rem 0.15rem;">4<td style="padding: 0.175rem 0.15rem;">78.62%<td style="padding: 0.175rem 0.15rem;">1.30<td style="padding: 0.175rem 0.15rem;">1.31<td style="padding: 0.175rem 0.15rem;">94.66s<td style="padding: 0.175rem 0.15rem;">194.78W<td style="padding: 0.175rem 0.15rem;">10512.7MiB<td style="padding: 0.175rem 0.15rem;">69.43%<td style="padding: 0.175rem 0.15rem;"><img alt="bert_report_CoLA_Medium_4.png" class="preview-img bg normal" data-loaded="false" height="30px" data-src="https://lujiamin.com/image/lab/bert/bert_report_CoLA_Medium_4.png" style="margin: 0; height: 30px" data-proofer-ignore><tr style="background-color: rgb(245, 251, 255); text-align: center; font-size: 80%;"><td style="padding: 0.175rem 0.15rem;">Medium<td style="padding: 0.175rem 0.15rem;">8<td style="padding: 0.175rem 0.15rem;">78.52%<td style="padding: 0.175rem 0.15rem;">1.14<td style="padding: 0.175rem 0.15rem;">1.15<td style="padding: 0.175rem 0.15rem;">60.66s<td style="padding: 0.175rem 0.15rem;">204.15W<td style="padding: 0.175rem 0.15rem;">10492.2MiB<td style="padding: 0.175rem 0.15rem;">76.68%<td style="padding: 0.175rem 0.15rem;"><img alt="bert_report_CoLA_Medium_8.png" class="preview-img bg normal" data-loaded="false" height="30px" data-src="https://lujiamin.com/image/lab/bert/bert_report_CoLA_Medium_8.png" style="margin: 0; height: 30px" data-proofer-ignore><tr style="background-color: rgb(245, 251, 255); text-align: center; font-size: 80%;"><td style="padding: 0.175rem 0.15rem;">Medium<td style="padding: 0.175rem 0.15rem;">16<td style="padding: 0.175rem 0.15rem;">77.85%<td style="padding: 0.175rem 0.15rem;">0.88<td style="padding: 0.175rem 0.15rem;">0.89<td style="padding: 0.175rem 0.15rem;">47.73s<td style="padding: 0.175rem 0.15rem;">205.18W<td style="padding: 0.175rem 0.15rem;">10482.9MiB<td style="padding: 0.175rem 0.15rem;">76.96%<td style="padding: 0.175rem 0.15rem;"><img alt="bert_report_CoLA_Medium_16.png" class="preview-img bg normal" data-loaded="false" height="30px" data-src="https://lujiamin.com/image/lab/bert/bert_report_CoLA_Medium_16.png" style="margin: 0; height: 30px" data-proofer-ignore><tr style="background-color: rgb(245, 251, 255); text-align: center; font-size: 80%;"><td style="padding: 0.175rem 0.15rem;">Medium<td style="padding: 0.175rem 0.15rem;">32<td style="padding: 0.175rem 0.15rem;">78.62%<td style="padding: 0.175rem 0.15rem;">0.71<td style="padding: 0.175rem 0.15rem;">0.71<td style="padding: 0.175rem 0.15rem;">38.97s<td style="padding: 0.175rem 0.15rem;">206.95W<td style="padding: 0.175rem 0.15rem;">10486.3MiB<td style="padding: 0.175rem 0.15rem;">78.64%<td style="padding: 0.175rem 0.15rem;"><img alt="bert_report_CoLA_Medium_32.png" class="preview-img bg normal" data-loaded="false" height="30px" data-src="https://lujiamin.com/image/lab/bert/bert_report_CoLA_Medium_32.png" style="margin: 0; height: 30px" data-proofer-ignore><tr style="background-color: rgb(245, 251, 255); text-align: center; font-size: 80%;"><td style="padding: 0.175rem 0.15rem;">Medium<td style="padding: 0.175rem 0.15rem;">64<td style="padding: 0.175rem 0.15rem;">79.10%<td style="padding: 0.175rem 0.15rem;">0.71<td style="padding: 0.175rem 0.15rem;">0.72<td style="padding: 0.175rem 0.15rem;">34.70s<td style="padding: 0.175rem 0.15rem;">212.36W<td style="padding: 0.175rem 0.15rem;">10479.2MiB<td style="padding: 0.175rem 0.15rem;">81.29%<td style="padding: 0.175rem 0.15rem;"><img alt="bert_report_CoLA_Medium_64.png" class="preview-img bg normal" data-loaded="false" height="30px" data-src="https://lujiamin.com/image/lab/bert/bert_report_CoLA_Medium_64.png" style="margin: 0; height: 30px" data-proofer-ignore><tr style="background-color: rgb(253, 248, 241); text-align: center; font-size: 80%;"><td style="padding: 0.175rem 0.15rem;">Base<td style="padding: 0.175rem 0.15rem;">2<td style="padding: 0.175rem 0.15rem;">83.13%<td style="padding: 0.175rem 0.15rem;">1.52<td style="padding: 0.175rem 0.15rem;">1.53<td style="padding: 0.175rem 0.15rem;">324.06s<td style="padding: 0.175rem 0.15rem;">190.54W<td style="padding: 0.175rem 0.15rem;">10528.7MiB<td style="padding: 0.175rem 0.15rem;">83.31%<td style="padding: 0.175rem 0.15rem;"><img alt="bert_report_CoLA_Base_2.png" class="preview-img bg normal" data-loaded="false" height="30px" data-src="https://lujiamin.com/image/lab/bert/bert_report_CoLA_Base_2.png" style="margin: 0; height: 30px" data-proofer-ignore><tr style="background-color: rgb(253, 248, 241); text-align: center; font-size: 80%;"><td style="padding: 0.175rem 0.15rem;">Base<td style="padding: 0.175rem 0.15rem;">4<td style="padding: 0.175rem 0.15rem;">82.84%<td style="padding: 0.175rem 0.15rem;">1.26<td style="padding: 0.175rem 0.15rem;">1.27<td style="padding: 0.175rem 0.15rem;">196.86s<td style="padding: 0.175rem 0.15rem;">212.73W<td style="padding: 0.175rem 0.15rem;">10525.8MiB<td style="padding: 0.175rem 0.15rem;">86.83%<td style="padding: 0.175rem 0.15rem;"><img alt="bert_report_CoLA_Base_4.png" class="preview-img bg normal" data-loaded="false" height="30px" data-src="https://lujiamin.com/image/lab/bert/bert_report_CoLA_Base_4.png" style="margin: 0; height: 30px" data-proofer-ignore><tr style="background-color: rgb(253, 248, 241); text-align: center; font-size: 80%;"><td style="padding: 0.175rem 0.15rem;">Base<td style="padding: 0.175rem 0.15rem;">8<td style="padding: 0.175rem 0.15rem;">81.88%<td style="padding: 0.175rem 0.15rem;">1.15<td style="padding: 0.175rem 0.15rem;">1.16<td style="padding: 0.175rem 0.15rem;">140.55s<td style="padding: 0.175rem 0.15rem;">213.59W<td style="padding: 0.175rem 0.15rem;">10514.1MiB<td style="padding: 0.175rem 0.15rem;">86.66%<td style="padding: 0.175rem 0.15rem;"><img alt="bert_report_CoLA_Base_8.png" class="preview-img bg normal" data-loaded="false" height="30px" data-src="https://lujiamin.com/image/lab/bert/bert_report_CoLA_Base_8.png" style="margin: 0; height: 30px" data-proofer-ignore><tr style="background-color: rgb(253, 248, 241); text-align: center; font-size: 80%;"><td style="padding: 0.175rem 0.15rem;">Base<td style="padding: 0.175rem 0.15rem;">16<td style="padding: 0.175rem 0.15rem;">83.22%<td style="padding: 0.175rem 0.15rem;">0.89<td style="padding: 0.175rem 0.15rem;">0.90<td style="padding: 0.175rem 0.15rem;">113.88s<td style="padding: 0.175rem 0.15rem;">219.03W<td style="padding: 0.175rem 0.15rem;">10514.8MiB<td style="padding: 0.175rem 0.15rem;">87.67%<td style="padding: 0.175rem 0.15rem;"><img alt="bert_report_CoLA_Base_16.png" class="preview-img bg normal" data-loaded="false" height="30px" data-src="https://lujiamin.com/image/lab/bert/bert_report_CoLA_Base_16.png" style="margin: 0; height: 30px" data-proofer-ignore><tr style="background-color: rgb(253, 248, 241); text-align: center; font-size: 80%;"><td style="padding: 0.175rem 0.15rem;">Base<td style="padding: 0.175rem 0.15rem;">32<td style="padding: 0.175rem 0.15rem;">81.02%<td style="padding: 0.175rem 0.15rem;">0.81<td style="padding: 0.175rem 0.15rem;">0.82<td style="padding: 0.175rem 0.15rem;">98.39s<td style="padding: 0.175rem 0.15rem;">223.67W<td style="padding: 0.175rem 0.15rem;">10511.9MiB<td style="padding: 0.175rem 0.15rem;">88.19%<td style="padding: 0.175rem 0.15rem;"><img alt="bert_report_CoLA_Base_32.png" class="preview-img bg normal" data-loaded="false" height="30px" data-src="https://lujiamin.com/image/lab/bert/bert_report_CoLA_Base_32.png" style="margin: 0; height: 30px" data-proofer-ignore></table></div></div></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/laboratory/'>Laboratory</a>, <a href='/categories/deep-learning/'>Deep Learning</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/deep-learning/" class="post-tag no-text-decoration">Deep Learning</a> <a href="/tags/bert/" class="post-tag no-text-decoration">BERT</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=BERT 实验记录 - Jiamin Lu&amp;url=https://lujiamin.com/posts/2022/04/Bert-Report/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=BERT 实验记录 - Jiamin Lu&amp;u=https://lujiamin.com/posts/2022/04/Bert-Report/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https://lujiamin.com/posts/2022/04/Bert-Report/&amp;text=BERT 实验记录 - Jiamin Lu" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/bert/">BERT</a> <a class="post-tag" href="/tags/c/">C++</a> <a class="post-tag" href="/tags/deep-learning/">Deep Learning</a></div></div></div><script src="/assets/js/my-bootstrap-toc.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/2022/04/From-C-To-C++/"><div class="card-body"> <em class="timeago small" data-ts="1650729600" > 2022-04-24 ------ </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>From C To C++</h3><div class="text-muted small"><p> C++ 类与对象 C++ 类 (Class) 可以看做是 C 中结构体 (Struct) 升级版。Class 的成员不仅仅可以是变量还可以是函数，类的成员变量称为“属性 (Property)”，成员函数称为“方法(Method)”。通过类定义出来的变量叫做“对象(Object)”，创建对象的过程叫做类的实例化，因此也称对象是类的一个“实例 (Instance)”。 C++ 的编译与运行 ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/2022/04/From-C-To-C++/" class="btn btn-outline-primary" prompt="Older"><p>From C To C++</p></a> <span class="btn btn-outline-primary disabled" prompt="Newer"><p>-</p></span></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://github.com/jiaminL">jiamin Lu</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/bert/">BERT</a> <a class="post-tag" href="/tags/c/">C++</a> <a class="post-tag" href="/tags/deep-learning/">Deep Learning</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script> /* see: <https://docs.mathjax.org/en/latest/options/input/tex.html#tex-options> */ MathJax = { tex: { inlineMath: [ /* start/end delimiter pairs for in-line math */ ['$','$'], ['\\(','\\)'] ], displayMath: [ /* start/end delimiter pairs for display math */ ['$$', '$$'], ['\\[', '\\]'] ] } }; </script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"> </script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-4KDRQ5D3HY"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-4KDRQ5D3HY'); }); </script>
